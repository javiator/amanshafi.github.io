# Welcome to Jekyll!
#
# This config file is meant for settings that affect your whole blog, values
# which you are expected to set up once and rarely edit after that. If you find
# yourself editing this file very often, consider using Jekyll's data files
# feature for the data you need to update frequently.
#
# For technical reasons, this file is *NOT* reloaded automatically when you use
# 'bundle exec jekyll serve'. If you change this file, please restart the server process.

# Site settings
# These are used to personalize your new site. If you look in the HTML files,
# you will see them accessed via {{ site.title }}, {{ site.email }}, and so on.
# You can create any custom variable you would like, and they will be accessible
# in the templates via {{ site.myvariable }}.
title: My Architecture and Learning space
email: 
description: Personal blog and portfolio — sharing projects, code, and learning notes.
twitter_username: username
github_username: javiator
minimal_mistakes_skin: air
search: true

# Analytics
google_analytics: # Replace with your GA4 measurement ID (e.g., G-XXXXXXXXXX)
google_site_verification: # Replace with your Google Search Console verification code

# Custom CSS
custom_css:
  - "/assets/css/main.scss"

# Custom head content - minimal CSS only for specific overrides
head:
  - '<style>
      /* Additional specific overrides if needed */
    </style>'
  - '{% include analytics.html %}'
  - '<style>
      /* Cookie Consent Banner Styles */
      .cookie-consent-banner {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: #2c3e50;
        color: white;
        padding: 20px;
        z-index: 1000;
        box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        border-top: 3px solid #3498db;
      }
      .cookie-consent-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 20px;
      }
      .cookie-consent-text h4 {
        margin: 0 0 8px 0;
        color: #3498db;
        font-size: 1.1em;
      }
      .cookie-consent-text p {
        margin: 0;
        font-size: 0.9em;
        line-height: 1.4;
      }
      .cookie-consent-text a {
        color: #3498db;
        text-decoration: underline;
      }
      .cookie-consent-text a:hover {
        color: #5dade2;
      }
      .cookie-consent-buttons {
        display: flex;
        gap: 10px;
        flex-shrink: 0;
      }
      .cookie-consent-buttons .btn {
        padding: 8px 16px;
        font-size: 0.9em;
        border-radius: 4px;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .cookie-consent-buttons .btn--primary {
        background: #3498db;
        color: white;
      }
      .cookie-consent-buttons .btn--primary:hover {
        background: #2980b9;
      }
      .cookie-consent-buttons .btn--small {
        background: transparent;
        color: white;
        border: 1px solid #7f8c8d;
      }
      .cookie-consent-buttons .btn--small:hover {
        background: #7f8c8d;
        color: white;
      }
      @media (max-width: 768px) {
        .cookie-consent-content {
          flex-direction: column;
          text-align: center;
        }
        .cookie-consent-buttons {
          width: 100%;
          justify-content: center;
        }
      }
    </style>'
  - '<script>
      // Cookie Consent Management
      (function() {
        "use strict";
        
        // Cookie utility functions
        function setCookie(name, value, days) {
          const expires = new Date();
          expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
          document.cookie = name + "=" + value + ";expires=" + expires.toUTCString() + ";path=/;SameSite=Lax";
        }
        
        function getCookie(name) {
          const nameEQ = name + "=";
          const ca = document.cookie.split(";");
          for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === " ") c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
          }
          return null;
        }
        
        // Check if consent has been given
        function hasConsent() {
          const consent = getCookie("cookie-consent");
          return consent === "accepted" || consent === "custom" || consent === "declined";
        }
        
        // Show/hide Google Analytics based on consent
        function toggleAnalytics(enabled) {
          if (typeof window.gtag !== "undefined") {
            if (enabled) {
              window.gtag("consent", "update", {
                "analytics_storage": "granted"
              });
            } else {
              window.gtag("consent", "update", {
                "analytics_storage": "denied"
              });
            }
          }
        }
        
        // Initialize cookie consent
        function initCookieConsent() {
          console.log("🍪 Initializing cookie consent...");
          
          const banner = document.getElementById("cookie-consent-banner");
          
          if (!banner) {
            console.error("❌ Cookie consent banner not found");
            return;
          }
          
          console.log("✅ Cookie consent banner found");
          
          // Show banner if no consent given
          if (!hasConsent()) {
            banner.style.display = "block";
            console.log("Showing cookie banner - no consent found");
          } else {
            banner.style.display = "none";
            console.log("Hiding cookie banner - consent found");
            // Apply saved analytics consent
            const analyticsConsent = getCookie("analytics-cookies");
            if (analyticsConsent === "true") {
              toggleAnalytics(true);
            } else if (analyticsConsent === "false") {
              toggleAnalytics(false);
            }
          }
          
          // Banner event listeners
          const acceptBtn = document.getElementById("cookie-accept");
          const declineBtn = document.getElementById("cookie-decline");
          
          if (acceptBtn) {
            acceptBtn.addEventListener("click", function() {
              setCookie("cookie-consent", "accepted", 365);
              setCookie("analytics-cookies", "true", 365);
              setCookie("preference-cookies", "true", 365);
              banner.style.display = "none";
              toggleAnalytics(true);
              console.log("Cookies accepted");
            });
          }
          
          if (declineBtn) {
            declineBtn.addEventListener("click", function() {
              setCookie("cookie-consent", "declined", 365);
              setCookie("analytics-cookies", "false", 365);
              setCookie("preference-cookies", "false", 365);
              banner.style.display = "none";
              toggleAnalytics(false);
              console.log("Cookies declined");
            });
          }
        }
        
        // Initialize when DOM is ready
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", initCookieConsent);
        } else {
          initCookieConsent();
        }
        
        // Add global debug functions
        window.debugCookies = function() {
          console.log("Cookie Debug Info:");
          console.log("cookie-consent:", getCookie("cookie-consent"));
          console.log("analytics-cookies:", getCookie("analytics-cookies"));
          console.log("preference-cookies:", getCookie("preference-cookies"));
          console.log("hasConsent():", hasConsent());
        };
        
        window.clearCookieConsent = function() {
          document.cookie = "cookie-consent=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;";
          document.cookie = "analytics-cookies=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;";
          document.cookie = "preference-cookies=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;";
          console.log("All cookie consent cookies cleared");
          location.reload();
        };
        
        // Test function availability
        console.log("🍪 Cookie consent functions loaded:");
        console.log("debugCookies:", typeof window.debugCookies);
        console.log("clearCookieConsent:", typeof window.clearCookieConsent);
        
      })();
    </script>'


# Build settings
markdown: kramdown
kramdown:
  input: GFM
  hard_wrap: false
  auto_ids: true
  footnote_nr: 1
  entity_output: as_char
  toc_levels: 1..6
  smart_quotes: lsquo,rsquo,ldquo,rdquo
  enable_coderay: false
remote_theme: mmistakes/minimal-mistakes
# Outputting
permalink: /:categories/:title/
paginate: 5 # amount of posts to show
paginate_path: /page:num/
timezone: # https://en.wikipedia.org/wiki/List_of_tz_database_time_zones

include:
  - _pages

# Exclude from processing.
# The following items will not be processed, by default. Create a custom list
# to override the default setting.
exclude:
  - Gemfile
  - Gemfile.lock
  - node_modules
  - vendor/bundle/
  - vendor/cache/
  - vendor/gems/
  - vendor/ruby/
  - README.md

# Plugins (previously gems:)
plugins:
  - jekyll-paginate
  - jekyll-sitemap
  - jekyll-gist
  - jekyll-feed
  - jemoji
  - jekyll-include-cache

author:
  name   : "Aman"
  avatar : "/assets/images/bio-photo.jpg"
  bio    : "Enterprise & Solution Architecture Leader"
  location: "London, UK"
  links:
    - label: "Website"
      icon: "fas fa-fw fa-link"
      url: "https://blog.architectureon.co.uk"
    - label: "LinkedIn"
      icon: "fab fa-fw fa-linkedin"
      url: "https://www.linkedin.com/in/amans82/"
    - label: "GitHub"
      icon: "fab fa-fw fa-github"
      url: "https://github.com/javiator"

footer:
  links:
    - label: "LinkedIn"
      icon: "fab fa-fw fa-linkedin"
      url: "https://www.linkedin.com/in/amans82/"
    - label: "GitHub"
      icon: "fab fa-fw fa-github"
      url: "https://github.com/javiator"
    - label: "Privacy Policy"
      icon: "fas fa-fw fa-shield-alt"
      url: "/privacy-policy/"

# Custom footer content
footer_custom:
  - '<div id="cookie-consent-banner" class="cookie-consent-banner" style="display: none;">
      <div class="cookie-consent-content">
        <div class="cookie-consent-text">
          <h4>Cookie Notice</h4>
          <p>We use cookies to analyze site traffic and improve your experience. By continuing to use our site, you consent to our use of cookies. 
            <a href="/privacy-policy/" target="_blank">Learn more in our Privacy Policy</a>.
          </p>
        </div>
        <div class="cookie-consent-buttons">
          <button id="cookie-accept" class="btn btn--primary btn--small">Accept All</button>
          <button id="cookie-decline" class="btn btn--small">Decline</button>
          <button id="cookie-settings" class="btn btn--small">Settings</button>
        </div>
      </div>
    </div>'


defaults:
  - scope:
      path: ""
      type: posts
    values:
      layout: single
      author_profile: true
      read_time: true
      comments: false
      share: true
      related: true
      toc: true
      toc_label: "Table of Contents"
      toc_sticky: true
      toc_sidebar: true
  - scope:
      path: "_pages"
      type: pages
    values:
      layout: single
      author_profile: true
      toc: true
      toc_label: "Table of Contents"
      toc_sticky: true
      toc_sidebar: true


category_archive:
  type: liquid
  path: /categories/
tag_archive:
  type: liquid
  path: /tags/
